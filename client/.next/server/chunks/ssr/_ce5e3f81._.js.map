{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/FoodieHub/client/src/app/%28restaurant%29/restaurant/reviews/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\r\nimport DishCard from '@/components/Dashboard/DishCard';\r\nimport { useAppSelector } from '@/hooks/reduxHooks';\r\nimport { Dish, Review } from '@/redux/reduxTypes';\r\nimport { calculateStars } from '@/utils/rating';\r\nimport axios from 'axios';\r\nimport { Pen, Star, X } from 'lucide-react';\r\nimport { useParams } from 'next/navigation';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form';\r\n\r\nconst Page = () => {\r\n\r\n    const { id } = useParams() as { id: string }\r\n    const [loading, setLoading] = useState<boolean>(false);\r\n    const [reviews, setReviews] = useState<Review[]>([]);\r\n    const [active, setActive] = useState<boolean>(false);\r\n    const [text, setText] = useState<string>(\"\");\r\n    const [rating, setRating] = useState<number>(0);\r\n    const {user} = useAppSelector(state=>state.auth);\r\n    const getReviews = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const res = await axios.get(`http://localhost:5200/api/restaurant/review/${id}`);\r\n            if (res.data)\r\n                setReviews(res.data);\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n\r\n        }\r\n    }\r\n\r\n    const createReview = async () => {\r\n        try {\r\n\r\n            const res = await axios.post(`http://localhost:5200/api/restaurant/review`, { id: id, text: text, rating: rating }, { withCredentials: true });\r\n            if (res.data)\r\n                getReviews();\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        getReviews();\r\n    }, [])\r\n    return (\r\n        <div className='flex flex-col gap-9 pb-8'>\r\n            <div className=\"flex items-center justify-between\">\r\n\r\n                <h1 className='section-title'>Reviews</h1>\r\n                {/* TODO check user whether hes admin role */}\r\n         \r\n                {active ?(  <button onClick={() => {\r\n                    setActive(false);\r\n\r\n                }} className='p-3 rounded-md btn  '><X size={16} /></button>) : (  <button onClick={() => {\r\n                    setActive(true);\r\n\r\n                }} className='p-3 rounded-md btn '><Pen size={16} /></button>)}\r\n              \r\n            </div>\r\n            {active &&\r\n                (\r\n\r\n                    <div className='flex items-start gap-2 border-b-[1px] border-borderColor pb-6'>\r\n                        <textarea onChange={(e) => setText(e.target.value)} placeholder='Type in your text...' className='input p-3 resize-none h-[220px]  max-w-[600px] w-full'></textarea>\r\n                        <div className=\"flex flex-col gap-2\">\r\n                            <button onClick={async () => {\r\n                                setActive(false);\r\n                                await createReview();\r\n                                \r\n                            }} className='btn p-2  bottom-[7px] right-0'>Create</button>\r\n                            <div className=\"flex flex-col gap-1\">\r\n                                <div className=\"flex gap-1\">\r\n\r\n                                    {Array.from({ length: 5 }).map((_, i) => (\r\n                                        <Star\r\n                                            key={i}\r\n\r\n                                            onClick={() => { setRating(i + 1) }}\r\n                                            size={20}\r\n                                            className={\r\n                                                i < rating\r\n                                                    ? \"text-primary fill-primary\"\r\n                                                    : \"text-primary\"\r\n                                            }\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                                <div className=\"flex gap-2 text-base font-medium\">\r\n                                    <span>Rating:</span>\r\n                                    {rating}\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                )}\r\n                <div className='grid grid-cols-2 gap-5'>\r\n            {\r\n                loading ? (<div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500 border-solid mx-auto\"></div>) :\r\n                    reviews.length > 0 ? reviews.map((review, idx) => {\r\n                        return (\r\n                            <div key={idx} className=\" flex flex-col gap-1 border-borderColor border-[1px] p-2 rounded-lg\">\r\n                                <h2 className=\"mb-1 text-lg leading-7 font-medium border-b-[1px] border-borderColor pb-0.5\">{review.sender.username}</h2>\r\n                                <p className='leading-7 text-base'>{review.text}</p>\r\n                                <div className=\"flex  gap-2 items-center\">\r\n                                    <div className=\"flex items-center gap-3 \">{calculateStars(review.rating || 0)}</div>\r\n                                   <span className='text-lg font-medium'>{review.rating}</span> </div>\r\n\r\n                            </div>\r\n                        )\r\n                    }) : (<span className='text-lg leading-5 font-medium text-center mt-6'>No info yet!</span>)\r\n\r\n            }\r\n</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Page"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"file":"pen.js","sources":["file:///C:/Users/User/Desktop/pet%20projects/FoodieHub/client/node_modules/lucide-react/src/icons/pen.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n];\n\n/**\n * @component @name Pen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pen = createLucideIcon('pen', __iconNode);\n\nexport default Pen;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA;IAClC;QACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QACA;YACE,CAAG,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YACH,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA;KACP;CAEJ;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAM,CAAA,wKAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,EAAO,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}